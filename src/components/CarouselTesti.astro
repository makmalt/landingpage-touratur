---
const { content } = Astro.props;
---

<div class="w-full flex justify-center">
  <div
    class="carousel w-full md:w-2/3 relative overflow-hidden"
    id="custom-carousel"
  >
    <div
      class="carousel-track flex transition-transform duration-700"
      style="width: 300%;"
    >
      <!-- Slide 1 -->
      <div class="carousel-item w-full flex justify-center shrink-0">
        <div class="w-3/5 h-64 flex justify-center items-center">
          <p class="text-center text-xl font-serif opacity-75">
            “{content.isi1}”
            <br /><br />
            <span class="text-lg">
              <b>Prof Endang (Guru Besar Unpad & Dokter di RSHS)</b> | Vietnam Trip
            </span>
          </p>
        </div>
      </div>
      <!-- Slide 2 -->
      <div class="carousel-item w-full flex justify-center shrink-0">
        <div class="w-3/5 h-64 flex justify-center items-center">
          <p class="text-center text-xl font-serif opacity-75">
            “{content.isi2}”
            <br /><br />
            <span class="text-lg">
              <b>Prof Nanan (Guru Besar Unpad & Dokter di RSHS)</b> | Pangandaran
              Trip
            </span>
          </p>
        </div>
      </div>
      <!-- Slide 3 -->
      <div class="carousel-item w-full flex justify-center shrink-0">
        <div class="w-3/5 h-64 flex justify-center items-center">
          <p class="text-center text-xl font-serif opacity-75">
            “{content.isi3}”
            <br /><br />
            <span class="text-lg">
              <b>Prof Ilya Avianti (Guru Besar Unpad)</b> | Belitung & Bromo Trip
            </span>
          </p>
        </div>
      </div>
    </div>

    <!-- Controls -->
    <div
      class="absolute left-5 right-5 top-1/2 flex -translate-y-1/2 transform justify-between z-10"
    >
      <button id="prevSlide" class="btn btn-circle">❮</button>
      <button id="nextSlide" class="btn btn-circle">❯</button>
    </div>
  </div>
</div>

<script is:inline>
  let currentSlide = 0;
  const track = document.querySelector("#custom-carousel .carousel-track");
  const totalSlides = track.children.length;

  function updateSlide() {
    track.style.transform = `translateX(-${currentSlide * 100}%)`;
  }

  document.getElementById("prevSlide").addEventListener("click", () => {
    currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
    updateSlide();
    resetAutoSlide();
  });

  document.getElementById("nextSlide").addEventListener("click", () => {
    currentSlide = (currentSlide + 1) % totalSlides;
    updateSlide();
    resetAutoSlide();
  });

  // Auto slide
  let slideInterval = setInterval(() => {
    currentSlide = (currentSlide + 1) % totalSlides;
    updateSlide();
  }, 5000); // 5 detik

  // Reset auto slide jika user klik tombol
  function resetAutoSlide() {
    clearInterval(slideInterval);
    slideInterval = setInterval(() => {
      currentSlide = (currentSlide + 1) % totalSlides;
      updateSlide();
    }, 5000);
  }
</script>
