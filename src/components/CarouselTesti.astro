---
const { content } = Astro.props;
---

<div class="w-full flex justify-center">
  <div
    class="carousel w-full md:w-2/3 relative overflow-hidden"
    id="custom-carousel"
  >
    <!-- Track / Slide Wrapper -->
    <div
      class="carousel-track flex transition-transform duration-700"
      style="width: 500%;"
    >
      <!-- Slide 1 -->
      <div class="carousel-item w-full flex justify-center shrink-0">
        <div class="w-3/5 h-100 md:h-64 flex items-center">
          <img
            src="/foto-testi/Prof Endang.webp"
            alt="foto prof endang"
            class="w-40 h-40 object-cover rounded-full mr-4"
          />
          <p class="text-left text-xl font-serif opacity-75">
            “{content.isi1}”<br /><br />
            <span class="text-lg">
              <b>Prof Endang (Guru Besar Unpad & Dokter di RSHS)</b> | Vietnam Trip
            </span>
          </p>
        </div>
      </div>

      <!-- Slide 2 -->
      <div class="carousel-item w-full flex justify-center shrink-0">
        <div class="w-3/5 h-100 md:h-64 flex items-center">
          <img
            src="/foto-testi/Ibu Lia.webp"
            alt="foto ibu lia"
            class="w-40 h-40 object-cover rounded-full mr-4"
          />
          <p class="text-left text-xl font-serif opacity-75">
            “{content.isi2}”<br /><br />
            <span class="text-lg">
              <b>Ibu Lia (Ketua IIDI Bandung)</b> | Vietnam Trip
            </span>
          </p>
        </div>
      </div>

      <!-- Slide 3 -->
      <div class="carousel-item w-full flex justify-center shrink-0">
        <div class="w-3/5 h-100 md:h-64 flex items-center">
          <img
            src="/foto-testi/Asep Goparuloh.webp"
            alt="foto asep goparuloh"
            class="w-40 h-40 object-cover rounded-full mr-4"
          />
          <p class="text-left text-xl font-serif opacity-75">
            “{content.isi3}”<br /><br />
            <span class="text-lg">
              <b>Asep Goparuloh (Sekretaris Daerah Kota Tasikmalaya)</b> | Belitung
              Trip
            </span>
          </p>
        </div>
      </div>

      <!-- Slide 4 -->
      <div class="carousel-item w-full flex justify-center shrink-0">
        <div class="w-3/5 h-100 md:h-64 flex items-center">
          <img
            src="/foto-testi/Prof Ilya Avianti.webp"
            alt="foto prof ilya"
            class="w-40 h-40 object-cover rounded-full mr-4"
          />
          <p class="text-left text-xl font-serif opacity-75">
            “{content.isi4}”<br /><br />
            <span class="text-lg">
              <b>Prof Ilya Avianti (Guru Besar Unpad)</b> | Belitung Trip
            </span>
          </p>
        </div>
      </div>

      <!-- Slide 5 -->
      <div class="carousel-item w-full flex justify-center shrink-0">
        <div class="w-3/5 h-100 md:h-64 flex items-center">
          <img
            src="/foto-testi/dr. Dzulfikar.webp"
            alt="foto dr dzulfikar"
            class="w-40 h-40 object-cover rounded-full mr-4"
          />
          <p class="text-left text-xl font-serif opacity-75">
            “{content.isi5}”<br /><br />
            <span class="text-lg">
              <b>Dr Dzulfikar Sp.A (Ketua IDAI Jabar)</b> | Pangandaran Trip
            </span>
          </p>
        </div>
      </div>
    </div>

    <!-- Controls (DIPINDAH KE LUAR .carousel-track) -->
    <div
      class="absolute left-5 right-5 top-1/2 flex -translate-y-1/2 transform justify-between z-10"
    >
      <button id="prevSlide" class="btn btn-circle bg-white text-black shadow"
        >❮</button
      >
      <button id="nextSlide" class="btn btn-circle bg-white text-black shadow"
        >❯</button
      >
    </div>
  </div>
</div>

<script is:inline>
  let currentSlide = 0;
  const track = document.querySelector("#custom-carousel .carousel-track");
  const totalSlides = track.children.length;

  function updateSlide() {
    track.style.transform = `translateX(-${currentSlide * 100}%)`;
  }

  document.getElementById("prevSlide").addEventListener("click", () => {
    currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
    updateSlide();
    resetAutoSlide();
  });

  document.getElementById("nextSlide").addEventListener("click", () => {
    currentSlide = (currentSlide + 1) % totalSlides;
    updateSlide();
    resetAutoSlide();
  });

  let slideInterval = setInterval(() => {
    currentSlide = (currentSlide + 1) % totalSlides;
    updateSlide();
  }, 5000);

  function resetAutoSlide() {
    clearInterval(slideInterval);
    slideInterval = setInterval(() => {
      currentSlide = (currentSlide + 1) % totalSlides;
      updateSlide();
    }, 5000);
  }
</script>
